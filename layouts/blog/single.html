{{- partial "htmlhead" . -}}
{{ $data := index .Site.Data .Site.Language.Lang }}

<body lang='{{ .Site.LanguageCode | default "en-us" }}' class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
        {{- partial "header" . -}}
        {{- partial "nav" . }}

        <div id="main">
            <table>
                <thead>
                    <tr>
                      <th>Fonte: www.tdvadilho.com</th>
                    </tr>
                </thead>

                <tbody>
                    <tr>
                        <td>
                            <div id="container_blogPost">
                        
                                <h2> {{ .Title }} </h2>
                                
                                <h4> {{ .Params.Subtitle }} | 
                                    <span id="comentariosblog" onclick="goToComentariosBlog()">
                                    <span  data-cusdis-count-page-id="{{ .Params.UniqueID }}">0 </span>
                                comentários </span> |
                                <img class="icon_classifIndicativaMiddleAlign" src= "{{ .Params.ClasIndicativa }}" > {{ .Params.DescripIndicativa }}
                                </h4>

                                {{ .Content }}

                                <div id="compartilharBlogPost-titulo">
                                    <h4>Compartilhe esse post</h4>
                                </div>
                                <div id="compartilharBlogPost">
                                    <span onclick="copiarUrlSharing()"><i class="fa fa-link icon"></i></span>
                                    <span onclick="fbSharing()"><i class="fa fa-facebook-f icon"></i></span>
                                    <span onclick="ttSharing()"><i class="fa fa-twitter icon"></i></span>
                                    <span onclick="instagramSharing()"><i class="fa fa-instagram icon"></i></span>
                                    <span onclick="wppSharing()"><i class="fa fa-whatsapp icon"></i></span>       
                                    <span onclick="redditSharing()"><i class="fa fa-reddit-alien icon"></i></span>
                                    <span onclick="linkedinSharing()"><i class="fa fa-linkedin icon"></i></span>
                                    <span onclick="pinterestSharing()"><i class="fa fa-pinterest icon"></i></span>
                                </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div id="comentariosblog-container">
                <div id="cusdis_thread"
                    data-host="https://cusdis.com"
                    data-app-id="b935f701-f887-42b4-96cf-1852bf2005b2"
                    data-page-id="{{ .Params.UniqueID }}"
                    data-page-url="{{ .Permalink }}"
                    data-page-title="{{ .Title }}"
                    >
                </div>
                
                <script>
                window.CUSDIS_LOCALE = {
                    powered_by: 'Powered by Cusdis',
                    post_comment: 'Postar comentário',
                    loading: 'Carregando',
                
                    // comment
                    email: 'Email (opcional)',
                    nickname: 'Nome',
                    reply_placeholder: 'Comentar...',
                    reply_btn: 'Responder',
                    sending: 'enviando...',
                
                    // reply
                    mod_badge: 'MOD',
                    content_is_required: 'Conteúdo é requerido',
                    nickname_is_required: 'Apelido é requerido',
                
                    comment_has_been_sent:
                    'Seu comentário foi enviado. Por favor aguarde pela aprovação.',
                }
                </script>
                <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
                <script defer data-host="https://cusdis.com" data-app-id="b935f701-f887-42b4-96cf-1852bf2005b2" src="https://cusdis.com/js/cusdis-count.umd.js"></script>
            </div>
            
            {{- partial "rodape.html" . }}
        </div>

        {{- partial "copyright" . }}
        <a href="#navPanel" id="navPanelToggle">{{ i18n "NAV_MENU" . }}</a>
        <div id="urlCopiarNotification">
        </div>

    </div>

    {{- template "_internal/google_analytics.html" . }}
    {{- partial "scripts/index" . }}

</body>

<style>

    .mySlides {
        flex-grow: 1
    }

    .mySlides iframe {
        /* width: 100%;
        height: 100%; */
        width: 100%;
        height: 500px;
    }

    .iframecontainer{
        position: relative;
        overflow: hidden;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
    }

    .iframecontainer iframe{
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
        border: none;
    }

/* GERAIS */
    #main{
        border: none;
        padding: 4rem 5rem 3rem 5rem;
    }

    a{
        border: none;
    }

    p>a{
        text-decoration: underline;
    }

    a:hover{
        cursor: pointer;
    }

    h4{
        margin-bottom: 30px;
    }

    button{
        margin-left: 3px;
        margin-right: 3px;
        margin-top: 10px;
    }

/* TEXTO */
    /* TOC */
    #topico_principal{
        text-align: left;
        margin-bottom: 5px;
        margin-top: 20px;
    }

    #subtopico{
        text-align: left;
        margin-bottom: 5px;
    }

    /* texto */
    table td{
        padding: 0;
    }

    table thead{
        border: none;
    }

    thead{
        display: none;
    }

    table tbody tr:nth-child(2n + 1) {
        background-color: rgba(255, 255, 255, 0);C
    }

    table tbody tr {
        border: none;
    }
    
    .text_divisorCapitulos{
        text-align: center;
        margin-top: 30px;
        margin-bottom: 20px;
        font-weight: 600;
        font-size: inherit;
        text-transform: uppercase;
        letter-spacing: 0.075em;
        hyphens: none;
    }

    /* imagem */
    .imgcentralizada{
        width: 100%;
        max-height: 96vh;
        display: inline-block;
        text-align: center;
    }

    .imgAlinhadaEsq{
        max-width: 60%;
        margin: 0;
        float: left;
    }

    figcaption p{
        text-align: center;
        font-size: 0.85rem;
        line-height: 1.6;
        color: rgb(122, 122, 122);
    }

    figcaption a{
        text-align: center;
        font-size: 0.85rem;
        line-height: 1.6;
        color: rgb(122, 122, 122);
        text-decoration: underline;
    }

    /*autoria e referencia*/
    .referenciar{
        font-size: 0.9rem;
        line-height: 1.6;
        color: rgb(122, 122, 122);
        text-align: right;
        margin-top: 20px;
    }

    .linkto_contato{
        font-size: 0.9rem;
        line-height: 1.6;
        color: rgb(122, 122, 122);
        margin-top: 25px;
    }

    /* Compartilhar */
    #compartilharBlogPost-titulo h4{
        margin-bottom: 0;
        margin-top: 40px;
        margin-bottom: 10px;
    }

    #compartilharBlogPost {
        display: flex;
        justify-content: center;
        margin-bottom: 40px;
    }

    #compartilharBlogPost span {
        width: 40px;
        height: 40px;
        background-color: #fff;
        text-align: center;
        line-height: 40px;
        font-size: 18px;
        margin: 0 0 0 10px;
        display: block;
        border-radius: 50%;
        position: relative;
        overflow: hidden;
        border: 3px solid #fff;
        z-index: 1;
        box-shadow: rgb(38, 57, 77) 0px 10px 20px -10px;
    }

    #compartilharBlogPost span:hover{
        cursor: pointer;
    }

    #compartilharBlogPost span .icon {
        position: relative;
        color: #262626;
        transition: .5s;
        z-index: 3;
        vertical-align: 2px !important;
        margin-right: 0 !important;
    }

    #compartilharBlogPost span:hover .icon {
        display: inline-block;
        color: #fff;
        transform: rotateY(360deg);
        -webkit-transform: rotateY(360deg);
        -ms-transform: rotateY(360deg);
    }

    #compartilharBlogPost span:before {
        content: "";
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        height: 100%;
        background: #f00;
        transition: .5s;
        z-index: 2;
    }

    #compartilharBlogPost span:hover:before {
        top: 0;
    }

    #compartilharBlogPost span:nth-child(1):before{
        background: #aab1c0;
    }
    
    #compartilharBlogPost span:nth-child(2):before{
        background: #3b5999;
    }

    #compartilharBlogPost span:nth-child(3):before{
        background: #55acee;
    }

    #compartilharBlogPost span:nth-child(4):before{
        background: #FE0B81;
    }

    #compartilharBlogPost span:nth-child(5):before{
        background: #128C7E;
    }

    #compartilharBlogPost span:nth-child(6):before{
        background: #FF4500;
    }

    #compartilharBlogPost span:nth-child(7):before{
        background: #0077B5;
    }

    #compartilharBlogPost span:nth-child(8):before{
        background: #C8232C;
    }

    /* Fading animation */
    .fade {
        animation-name: fade;
        animation-duration: 1.5s;
    }

    @keyframes fade {
        from {opacity: .4}
        to {opacity: 1}
    }

/* GoToComentários */
    #comentariosblog:hover{
        cursor: pointer;
        color: #252121 !important;
    }

    #comentariosblog{
        position: relative;
        display: -webkit-inline-box;
    }

    #comentariosblog::before{
        background: hsl(45 100% 70%);
        content: "";
        inset: 0;
        position: absolute;
        transform: scaleX(0);
        transform-origin: right;
        transition: transform 0.5s ease-in-out;
        z-index: -1;
    }

    #comentariosblog:hover::before{
        transform: scaleX(1);
        transform-origin: left;
    }

/* REGRAS DE MIDIA */
    @media screen and (max-width: 700px) and (min-width: 551px){
        h2{
            font-size: 2.5rem;
        }

        h4{
            font-size: 1.2rem;
        } 
    }

    @media screen and (max-width: 550px){
        h2{
            font-size: 2.2rem;
        }

        h4{
            font-size: 1.1rem;
        } 
    }

    @media screen and (max-width: 736px){
        #main {
            padding: 2rem 1.8rem 2rem 1.8rem;
        }
        #share_postBlog{
            width: 352px;
        }
        #container_btnCompartilharBlogPost{
            text-align: center;
        }

        #prevProcesso, #nextProcesso{
            display: none;
        }
    }

    @media screen and (max-width: 1036px) and (min-width:737px){
        #share_postBlog{
            max-width: 352px;
        }
    }  
</style>

<script>
    /* Mover a tela para a seção de comentários */
    let goToComentariosBlog = function(){
        let comentariosYPosition = document.getElementById("comentariosblog-container").offsetTop;
        window.scrollTo({left: 0, top: comentariosYPosition, behavior: "smooth"});
    }

    let scrollTo = function(newYPosition){
        console.log("oi")
    } 

    /* DESTACARR O MENU*/
    let activeMenu = document.querySelector("#nav > ul > li:nth-child(5)") || undefined;
    if(activeMenu)
        activeMenu.innerHTML = '<li class="active"> <a href="/blog">Blog</a></li>'

    /* COMPARTILHAMENTO */
    function fbSharing(post_url) {
        var url = new String(post_url);
        window.open(post_url , "share_dialog", "width=500, height=300");
    }

    function ttSharing(post_url){
        var url = new String(post_url);
        window.open(post_url , "share_dialog", "width=790, height=462");
    }

    function redditSharing(post_url){
        var url = new String(post_url);
        window.open(post_url , "share_dialog", "width=790, height=742");
    }

    function pinterestSharing(post_url){
        var url = new String(post_url);
        window.open(post_url , "share_dialog", "width=1080, height=727");
    }


    /* COMPARTILHAMENTO */
    function fbSharing() {
        var url = "https://www.facebook.com/sharer/sharer.php?u=" + urlCurrentPage;
        window.open(url , "share_dialog", "width=500, height=300");
    }

    function ttSharing(){
        var url = "https://twitter.com/share?url=" + urlCurrentPage + "%0a%0a&text=Gente, leia {{ .Params.title }}, postado no blog do autor @tdvadilho :) &text=🔗&hashtags=historietasTDVadilho";
        window.open(url , "share_dialog", "width=790, height=462");
    }

    function redditSharing(){
        var url = "https://www.reddit.com/submit?title=Historieta%20-%20TDVadilho&text=Gente,%20leia%20{{ .Params.title }},%20um%20post%20no%20blog%20do%20autor%20@td.vadilho";
        window.open(url , "share_dialog", "width=790, height=742");
    }

    function pinterestSharing(){
        var url = "pinterestSharing('{{ .Params.linkPin }}')";
        window.open(url , "share_dialog", "width=1080, height=727");
    }

    function wppSharing(){
        var url = "https://api.whatsapp.com/send?text=Lê esse post no blog do escritor TD Vadilho " + urlCurrentPage
        window.open(url)
    }

    function linkedinSharing(){
        var url = "https://www.linkedin.com/feed/?shareActive=true&text=Gente, leia '{{ .Params.title }}', postado no blog do %23escritor TD Vadilho! https://tdvadilho.com/historietas/historieta6 %23historias %23literatura"
        window.open(url, "width=790, height=742")
    }

    function instagramSharing(){
        var url = "{{ .Params.linkInsta }}"
        window.open(url, "width=790, height=742")
    }
    
    /* Carregando links de compartilhamento */
    let urlCurrentPage = window.location.href;

        /* Copiar URL*/    
        let copiarUrlSharing = function() {
            let createCopiarNotification = function() {
                let notification = document.getElementById("urlCopiarNotification");
                notification.style.display = "block";
                notification.innerHTML = '<i class="fa fa-link"></i> URL COPIADA</div>';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 2800);
            }

            if(navigator.clipboard) {
                navigator.clipboard.writeText(window.location.href);
                createCopiarNotification();
            }
            createCopiarNotification();
        }

    // CARROSSEL
    let slideIndex = 1;
    showSlides(slideIndex);

    // Next/previous controls
    function plusSlides(n) {
    showSlides(slideIndex += n);
    }

    // Thumbnail image controls
    function currentSlide(n) {
    showSlides(slideIndex = n);
    }

    function showSlides(n) {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        let dots = document.getElementsByClassName("dot");
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
    }

    //SWIPE LEFT OR RIGHT
    let touchsurface = document.getElementById('container_processo'),
        startX, 
        startY,
        dist,
        distThreshold,
        thresholdX = 50,
        thresholdY = 50,
        allowedTime = 1500,
        elapsedTime,
        startTime

    let setupSlider = function() {
        touchsurface.addEventListener('touchstart', function(e) {
            let touchobj = e.changedTouches[0]
            
            dist = 0
            distThreshold = 0
            startX = touchobj.pageX
            startY = touchobj.pageY
            startTime = new Date().getTime() 
        }, false)

        touchsurface.addEventListener('touchend', function(e) {
            var touchobj = e.changedTouches[0]
            dist = touchobj.pageX - startX
            distThreshold = Math.abs(dist)
            elapsedTime = new Date().getTime() - startTime
           
            console.log('dist ' + dist + ' threshold X ' + thresholdX)
            console.log('abs y ' + Math.abs(touchobj.pageY - startY) + ' thrs Y ' + thresholdY)
            console.log('elapsedTime ' + elapsedTime + ' allowed ' + allowedTime)

            if (
                elapsedTime <= allowedTime &&
                distThreshold >= thresholdX &&
                Math.abs(touchobj.pageY - startY) <= thresholdY &&
                dist > 0
            ){
                document.getElementById('prevProcesso').click()
            }

            if (
                elapsedTime <= allowedTime &&
                distThreshold >= thresholdX &&
                Math.abs(touchobj.pageY - startY) <= thresholdY &&
                dist < 0)
            {                                         
                document.getElementById('nextProcesso').click()
            }
        }, false)
    }
    
    document.addEventListener("DOMContentLoaded", (event) => { 
        setupSlider()
        /* Mover para hrefs âncoras do post */
    });
</script>